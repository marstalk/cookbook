2022å¹´06æœˆ21æ—¥

# overview

å•å‘é“¾è¡¨ã€å•å‘å¾ªç¯é“¾è¡¨ã€åŒå‘é“¾è¡¨ã€åŒå‘å¾ªç¯é“¾è¡¨ã€‚

è¦æ±‚ä»åˆ é™¤é“¾è¡¨ä¸­åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œä¸å¤–ä¹ä¸¤ç§æƒ…å†µ
1. **åˆ é™¤é“¾è¡¨ä¸­â€œå€¼ç­‰äºæŸä¸ªç»™å®šå€¼â€çš„èŠ‚ç‚¹**ï¼š è¿™ç§éœ€æ±‚ï¼Œéœ€è¦å…ˆé€šè¿‡O(N)çš„å¤æ‚åº¦æ‰¾åˆ°è¯¥èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ï¼Œç„¶åæ‰èƒ½åˆ é™¤`pre.next=pre.next.next`ï¼Œæ ¹æ®å¤æ‚åº¦åŠ æ³•åŸç†ï¼Œç»¼åˆä¸‹æ¥åˆ é™¤çš„å¤æ‚åº¦æ˜¯O(N)ã€‚
2. **åˆ é™¤ç»™å®šæŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹**ï¼š è¿™ç§éœ€æ±‚ï¼Œåœ¨å•é“¾è¡¨ä¸­ï¼Œä¹Ÿéœ€è¦å…ˆé€šè¿‡O(N)çš„å¤æ‚åº¦æ‰¾åˆ°è¯¥èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ï¼Œæ‰èƒ½è¿›è¡Œåˆ é™¤æ“ä½œã€‚ä¼˜åŒ–æ–¹å¼ï¼š**åŒå‘é“¾è¡¨**ï¼Œç»¼åˆå¤æ‚åº¦é™ä¸ºO(1)ï¼Œï¼ˆä¸ºä»€ä¹ˆæ˜¯Oï¼ˆ1ï¼‰å‘¢ï¼Œå› ä¸ºç»™çš„å‚æ•°æ˜¯æŒ‡é’ˆï¼Œè€Œä¸”è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„å°±æ˜¯æˆ‘ä»¬çš„ç›®æ ‡èŠ‚ç‚¹ï¼Œé‚£ä¹ˆåªéœ€è¦`listnode.pre.next = listnode.next`ï¼Œä¸å†éœ€è¦éå†æ‰¾åˆ°è¯¥èŠ‚ç‚¹ã€‚ï¼‰

è¦å»åœ¨é“¾è¡¨ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ ä¹Ÿæ˜¯ä¸€æ ·çš„æƒ…å†µã€‚
1. **åœ¨â€œå€¼ç­‰äºæŸä¸ªç»™å®šå€¼â€çš„èŠ‚ç‚¹æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹**ï¼š éœ€è¦å…ˆé€šè¿‡O(N)æ‰¾åˆ°è¯¥èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ï¼Œæ‰èƒ½é€šè¿‡O(1)æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œç»¼åˆä¸‹æ¥æ˜¯O(N)
2. **åœ¨ç»™å®šæŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹**ï¼š åœ¨å•é“¾è¡¨ä¸­ï¼Œä¹Ÿéœ€è¦å…ˆé€šè¿‡O(N)æ‰¾åˆ°è¯¥èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ï¼Œæ‰èƒ½è¿›è¡Œåˆ é™¤ï¼Œä¼˜åŒ–æ–¹å¼ï¼š**åŒå‘èŠ‚ç‚¹**ï¼Œç»¼åˆå¤æ‚åº¦é™ä¸ºO(1)

åŒå‘é“¾è¡¨é™¤äº†ä¸Šè¿°ä¸¤ä¸ªæœ‰ç‚¹ä¹‹å¤–ï¼Œè¿˜æœ‰ï¼šå¦‚æœæ˜¯æœ‰åºé“¾è¡¨ï¼Œé‚£ä¹ˆæŸ¥æ‰¾æ•ˆç‡ä¹Ÿä¼šæ¯”å•å‘é“¾è¡¨è¦é«˜ï¼Œåªéœ€è¦è®°å½•ä¸Šæ¬¡æŸ¥æ‰¾çš„ä½ç½®Pï¼Œé‚£ä¹ˆä¸‹æ¬¡æŸ¥è¯¢çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä»På¼€å§‹å¾€å‰æˆ–è€…å¾€åå³å¯ã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ç©ºé—´æ¢æ—¶é—´ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰ï¼šç¼“å­˜è®¾è®¡ï¼ˆç¡¬ä»¶ç¼“å­˜å¦‚CPU L1~L3ï¼Œè½¯ä»¶ç¼“å­˜å¦‚Redisï¼Œæ•°æ®åº“å†…å­˜ç¼“å­˜ç­‰ï¼‰

ç»¼ä¸Šæ‰€è¿°ï¼ŒåŒå‘é“¾è¡¨åœ¨å®é™…å·¥ç¨‹ä¸­çš„ä½¿ç”¨ç‡è¾ƒé«˜ã€‚æ¯”å¦‚LinkedHashMap, LinkedList

æ•°ç»„ VS é“¾è¡¨ å…¶ä»–åŒºåˆ«ï¼š
1. æ•°ç»„ä½¿è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå¯ä»¥åˆ©ç”¨**CPUçš„ç¼“å­˜æœºåˆ¶**ï¼Œé¢„è¯»æ•°ç»„ä¸­çš„æ•°æ®ï¼Œæ‰€ä»¥è®¿é—®æ•ˆç‡æ›´é«˜ã€‚è€Œé“¾è¡¨åœ¨å†…å­˜ä¸­ä¸è¿ç»­ï¼Œæ‰€ä»¥å¯¹CPUç¼“å­˜ä¸å‹å¥½ï¼Œæ²¡æœ‰åŠæ³•æœ‰æ•ˆé¢„è¯»ã€‚
2. æ•°ç»„å¤§å°å›ºå®šï¼Œä¸€æ—¦å£°æ˜ï¼Œå°±å ç”¨è¿ç»­çš„å†…å­˜ç©ºé—´ã€‚å¦‚æœå£°æ˜è¿‡å¤§ï¼Œç³»ç»Ÿå¯èƒ½æ²¡æœ‰è¶³å¤Ÿçš„è¿ç»­å†…å­˜ç©ºé—´ï¼Œå¯¼è‡´OOMï¼ˆæœ‰æ—¶å€™å³ä½¿ç³»ç»Ÿæœªä½¿ç”¨çš„å†…å­˜ç©ºé—´ï¼ˆé›¶æ•£çš„ï¼‰å¤§äºå£°æ˜ç©ºé—´ï¼Œä¹Ÿä¼šé€ æˆOOMï¼‰ï¼›å¦‚æœå£°æ˜è¿‡å°ï¼Œéœ€è¦æ‰©å®¹æ—¶å€™ï¼Œéœ€è¦æ•´ä½“æ‹·è´ï¼Œç¼–ç¨‹å¤æ‚ï¼Œéå¸¸è€—æ—¶ã€‚å³ä½¿åŒ…è£…ç±»å¦‚Javaçš„ArrayListèƒ½å¤Ÿè‡ªåŠ¨æ‰©å®¹ï¼Œé‚£ä¹Ÿæ˜¯ä¸€æ ·çš„è€—æ—¶ã€‚

- æŒ‡é’ˆçš„å«ä¹‰
- ä¸è¦ä¸¢å¤±æŒ‡é’ˆ
- å°½é‡ä½¿ç”¨å¸¦å¤´é“¾è¡¨ã€ä»¥ç®€åŒ–è¾¹ç•ŒèŠ‚ç‚¹ï¼ˆheadå’Œtailï¼‰çš„å¤„ç†ï¼ˆå“¨å…µæœºåˆ¶ï¼‰
- ğŸŒ¶ç•™æ„è¾¹ç•Œæ˜¯å¦æ­£å¸¸ï¼š
  1. é“¾è¡¨ä¸ºç©ºæ˜¯å¦æ­£å¸¸å·¥ä½œï¼Ÿ
  2. é“¾è¡¨åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Ÿ
  3. é“¾è¡¨åªæœ‰ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Ÿ
  4. é“¾è¡¨èƒ½ä¸èƒ½æ­£å¸¸å¤„ç†headå’ŒtailèŠ‚ç‚¹ï¼Ÿ

ç»ƒä¹ ï¼š
- å•é“¾è¡¨åè½¬
- é“¾è¡¨ä¸­ç¯çš„æ£€æµ‹
- ä¸¤ä¸ªæœ‰åºçš„é“¾è¡¨åˆå¹¶
- åˆ é™¤é“¾è¡¨å€’æ•°ç¬¬ n ä¸ªç»“ç‚¹
- æ±‚é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹


# å“¨å…µæœºåˆ¶
> å“¨å…µå¯ä»¥ç†è§£ä¸ºå®ƒå¯ä»¥å‡å°‘ç‰¹æ®Šæƒ…å†µçš„åˆ¤æ–­ï¼Œæ¯”å¦‚åˆ¤ç©ºï¼Œæ¯”å¦‚åˆ¤è¶Šç•Œï¼Œæ¯”å¦‚å‡å°‘é“¾è¡¨æ’å…¥åˆ é™¤ä¸­å¯¹ç©ºé“¾è¡¨çš„åˆ¤æ–­ï¼Œæ¯”å¦‚ä¾‹å­ä¸­å¯¹iè¶Šç•Œçš„åˆ¤æ–­ã€‚
> ç©ºä¸è¶Šç•Œå¯ä»¥è®¤ä¸ºæ˜¯å°æ¦‚ç‡æƒ…å†µï¼Œæ‰€ä»¥ä»£ç æ¯ä¸€æ¬¡æ“ä½œéƒ½èµ°ä¸€éåˆ¤æ–­ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½ä¼šæ˜¯å¤šä½™çš„ã€‚
> å“¨å…µçš„å·§å¦™å°±æ˜¯æå‰å°†è¿™ç§æƒ…å†µå»é™¤ï¼Œæ¯”å¦‚ç»™ä¸€ä¸ªå“¨å…µç»“ç‚¹ï¼Œä»¥åŠå°†keyèµ‹å€¼ç»™æ•°ç»„æœ«å…ƒç´ ï¼Œè®©æ•°ç»„éå†ä¸ç”¨åˆ¤æ–­è¶Šç•Œä¹Ÿå¯ä»¥å› ä¸ºç›¸ç­‰åœä¸‹æ¥ã€‚
> ä½¿ç”¨å“¨å…µçš„æŒ‡å¯¼æ€æƒ³åº”è¯¥æ˜¯å°†å°æ¦‚ç‡éœ€è¦çš„åˆ¤æ–­å…ˆæå‰æ‰¼æ€ï¼Œæ¯”å¦‚æå‰ç»™ä»–ä¸€ä¸ªå€¼è®©ä»–ä¸ä¸ºnullï¼Œæˆ–è€…æå‰é¢„è®¾å€¼ï¼Œæˆ–è€…å¤šæ€çš„æ—¶å€™æå‰ç»™ä¸ªç©ºå®ç°ï¼Œç„¶ååœ¨æ¯ä¸€æ¬¡æ“ä½œä¸­ä¸å¿…å†åˆ¤æ–­ä»¥å¢åŠ æ•ˆç‡ã€‚å“¨å…µæœºåˆ¶æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼š
<!-- ```java
// try to find last node.
ListNode head;
ListNode p = head;
while(p != null){
    p = p.next;
}
// here p is the last node.TODO


``` -->


# åŒæŒ‡é’ˆæŠ€å·§

- **ListNode p1, ListNode p2 åˆ†åˆ«æŒ‡å‘ä¸¤ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚**
- **è™šæ„ä¸€ä¸ªListNode dummyä½œä¸ºç»“æœçš„å¤´ç»“ç‚¹ï¼Œè¿”å›çš„æ—¶å€™æ˜¯dummy.nextï¼Œä¸ä»…å¯ä»¥ç®€æ´ä»£ç ï¼Œè€Œä¸”å¯ä»¥å¾ˆå¥½çš„å¤„ç†å¤´å°¾èŠ‚ç‚¹ã€‚**
- **é“¾è¡¨å¾€å‰èµ°ä¸€æ­¥çš„æ˜¯è¿™æ ·å­çš„ï¼šp = p.next**ã€‚
- **å¦‚æœéœ€è¦ã€ä¸€å®šè¦æ–­é“¾ï¼šListNode next = p.next; p.next=null; p = next;**
- **ä¸€ä¸ªé“¾è¡¨å¯ä»¥æœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œå¿«æŒ‡é’ˆèµ°åˆ°ç»“æŸçš„æ—¶å€™ï¼Œæ…¢æŒ‡é’ˆçš„èŠ‚ç‚¹å°±æ˜¯ç»“æœï¼Œæ¯”å¦‚å¯»æ‰¾å€’æ•°èŠ‚ç‚¹ã€æ˜¯å¦æœ‰ç¯ï¼ˆå¦‚æœå¿«èŠ‚ç‚¹çš„é€Ÿåº¦æ˜¯æ…¢èŠ‚ç‚¹çš„ä¸¤å€**ï¼Œä»–ä¸¤ä¸€å®šä¼šç›¸é‡ï¼‰
- ä½¿ç”¨é€’å½’çš„æ–¹å¼å¤„ç†é“¾è¡¨çš„ç©ºé—´å¤æ‚åº¦è‡³å°‘æ˜¯O(N)ï¼Œå…¶å®æ˜¯ä¸å¦‚è¿­ä»£å¼çš„ï¼Œæ‰€ä»¥é’ˆå¯¹é•¿é“¾è¡¨ï¼Œè¿˜æ˜¯ç”¨è¿­ä»£å¼è¾ƒä¸ºåˆç†ã€‚

```Java
// è¿­ä»£æ¡†æ¶ï¼š
ListNode loop(ListNode head){
    for(ListNode p = head; p != null; p = p.next){
        // Do something here
    }
}
// é€’å½’æ¡†æ¶
void traverse(ListNode head){
    // å‰åº
    ListNode subRes = traverse(head.next);
    // ååº
}
```

## åˆå¹¶
https://leetcode.cn/problems/merge-two-sorted-lists/
- å“¨å…µï¼
- [code](../../javademo/listnode/MergeSortedList.java)

```Java
ListNode mergeTwoLists(ListNode list1, ListNode list2){
    if(list1 == null) return list2;
    if(list2 == null) return list1;
    
    ListNode dummy = new ListNode(-1);
    ListNode p = dummy;
    
    ListNode p1 = list1;
    ListNode p2 = list2;
    while(p1 != null && p2 != null){
        if(p1.val <= p2.val){
            dummy.next = p1;
            p1 = p1.next;
        }else{
            dummy.next = p2;
            p2 = p2.next;
        }
        dummy = dummy.next;
    }
    if(p1 == null) {
        dummy.next = p2;
    }else{
        dummy.next = p1;
    }
    return dummy.next;
}
```
ğŸ“¢ï¼Œè¿™é‡Œä¸éœ€è¦è®¾ç½®æŸä¸ªèŠ‚ç‚¹çš„next=nullï¼ˆæ—¢æ–­é“¾ï¼‰å› ä¸ºåˆå¹¶çš„è¿‡ç¨‹å°±ä¼šä¸æ–­çš„æ–­é“¾å†é“¾ï¼Œè€Œä¸”åˆ°æœ€åçš„èŠ‚ç‚¹çš„æ—¶å€™ï¼Œè‡ªç„¶æ˜¯æ–­é“¾çŠ¶æ€ã€‚éœ€è¦æ–­é“¾çš„ä¾‹å­å¦‚ä¸‹ï¼š

## æ‹†åˆ†
[86. åˆ†éš”é“¾è¡¨](https://leetcode.cn/problems/partition-list/)
1. **å…³é”®åœ¨äºæ–­é“¾ï¼Œå¦åˆ™ä¼šå‡ºé—®é¢˜**ï¼ï¼ï¼
2. [code](../../javademo/listnode/Partition.java)
```Java
// ç»™ä½ ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ head å’Œä¸€ä¸ªç‰¹å®šå€¼ x ï¼Œ
// è¯·ä½ å¯¹é“¾è¡¨è¿›è¡Œåˆ†éš”ï¼Œä½¿å¾—æ‰€æœ‰ å°äº x çš„èŠ‚ç‚¹éƒ½å‡ºç°åœ¨ å¤§äºæˆ–ç­‰äº x çš„èŠ‚ç‚¹ä¹‹å‰ã€‚
// ä½ åº”å½“ ä¿ç•™ ä¸¤ä¸ªåˆ†åŒºä¸­æ¯ä¸ªèŠ‚ç‚¹çš„åˆå§‹ç›¸å¯¹ä½ç½®ã€‚

ListNode partition(ListNode head, int x){
    if(head == null) return head;
    ListNode small = new ListNode(-1);
    ListNode s = small;
    ListNode big = new ListNode(-1);
    ListNode b = big;
    
    ListNode p = head;
    while(p != null){
        if(p.val < x){
            s.next = p;
            s = s.next;
        }else {
            b.next = p;
            b = b.next;
        }
        
        ListNode next = p.next;
        p.next = null;
        p = next;
    }
    s.next = big.next;
    return s.next;
}
```
å¦‚ä½•åŸåœ°ï¼Ÿ


## åˆå¹¶å¤šä¸ªå‡åºï¼ˆkè·¯åˆå¹¶ï¼‰
K-way Merge Algorithm [23. åˆå¹¶Kä¸ªå‡åºé“¾è¡¨](https://leetcode.cn/problems/merge-k-sorted-lists/)

- å€ŸåŠ©ä¼˜å…ˆé˜Ÿåˆ—ï¼Œç”¨æ¥å¿«é€Ÿï¼ˆlogNï¼‰æ‰¾åˆ°ä¸­æœ€å°çš„å…ƒç´ ã€‚
- 

```Java
ListNode mergeKLists(ListNode[] lists){
    if( lists == null) return null;
    
    ListNode dummy = new ListNode(-1);
    ListNode p = dummy;
    
    PriorityQueue<ListNode> pQueue = new PriorityQueue(lists.length, (a, b) -> a.val - b.val);
    for(ListNode head: lists){
        if(head != null){
            // make sure no element is null
            pQueue.offer(head);
        }
    }
    
    while(!pQueue.isEmpty){
        ListNode tmp = pQueue.poll();
        p.next = tmp;
        p = p.next;
        if(tmp.next != null){
            pQueue.offer(tmp.next);
        }
    }
    
    // no need to break the link
    // because everytime we set p.next = tmp is breaking the link
    return dummy.next;
}
```

## å•é“¾è¡¨å¯»æ‰¾å€’æ•°ç¬¬Kä¸ªèŠ‚ç‚¹
- ä¹Ÿæ˜¯åŒæŒ‡é’ˆçš„åº”ç”¨ï¼Œè¿™ä¸¤ä¸ªæŒ‡é’ˆè¦ä¿æŒKçš„è·ç¦»ï¼Œé‚£ä¹ˆå½“å‰æŒ‡é’ˆåˆ°åº•çš„æ—¶å€™ï¼ŒåæŒ‡é’ˆå°±æŒ‡å‘äº†ç›®æ ‡èŠ‚ç‚¹ã€‚
[code](../../javademo/listnode/FindNthFromEnd.java)
```Java
ListNode findNthFromEnd(ListNode head, int n){
    // n is sure to be small or equals to the length of the link
    ListNode fast = head;
    for(int i = 0; i < n; i++){
        fast = fast.next;
    }
    ListNode slow = head;
    while(fast != null){
        fast = fast.next;
        slow = slow.next;
    }
    
    return slow;
}
```

## åˆ é™¤å€’æ•°ç¬¬Kä¸ªèŠ‚ç‚¹
- æ‰¾åˆ°å€’æ•°ç¬¬k+1ä¸ªèŠ‚ç‚¹ï¼Œä½¿ç”¨k+1.next = k+1.next.next
- è€ƒè™‘ä¸‹å¦‚æœè¦åˆ é™¤çš„æ˜¯å¤´èŠ‚ç‚¹ï¼Ÿæ‰€ä»¥è¿™ä¸ªæ—¶å€™åœ¨åŸlistNodeçš„åŸºç¡€ä¹‹ä¸ŠåŠ ä¸Šä¸€ä¸ªdummy listNodeï¼Œé‚£ä¹ˆå€’æ•°k+1å°±æ˜¯è¿™ä¸ªdummyï¼Œç„¶ådummy.next = dummy.next.nextï¼›return dummy.nextå»å¤´çš„æ•ˆæœã€‚

```Java
ListNode removeNthFromEnd(ListNode head, int k){
    ListNode dummy = new ListNode(-1);
    dummy.next = head;
    // å…¥å‚æ˜¯dummyå’Œk+1ï¼Œå‡è®¾k == link.lengthï¼Œé‚£ä¹ˆè¿”å›çš„å°±æ˜¯dummyèŠ‚ç‚¹ã€‚
    // å› ä¸ºæˆ‘ä»¬è¦æ‰¾çš„æ˜¯è¢«åˆ é™¤çš„èŠ‚ç‚¹çš„å‰ä¸€ä¸ªï¼Œæ‰€ä»¥éœ€è¦åœ¨å¤´å¤´åŠ ä¸Šä¸€ä¸ªã€‚
    ListNode previous = findNthFromEnd(dummy, k+1);
    // ä¸ºä»€ä¹ˆx.nextä¸åšnullåˆ¤æ–­å‘¢ï¼Ÿä¸¥è°¨è¯´æ¥åº”è¯¥åšä¸ªåˆ¤æ–­ã€‚
    // å‡è®¾æ˜¯æœ€åä¸€ä¸ªï¼Œé‚£ä¹ˆxå°±æ˜¯å€’æ•°ç¬¬äºŒä¸ªï¼Œx.nextä¸ºå€’æ•°ç¬¬ä¸€ä¸ªï¼Œx.next.nextæ‰æ˜¯null,
    // ä¸éœ€è¦åšç©ºåˆ¤æ–­ã€‚
    previous.next = previous.next.next;
    return dummy.next;
}
```

## ç¯åˆ¤æ–­

- å‡è®¾æ…¢æŒ‡é’ˆçš„é€Ÿåº¦æ˜¯sï¼Œå¿«æŒ‡é’ˆçš„é€Ÿåº¦æ˜¯2s
- å¦‚æœèµ·ç‚¹ç›¸åŒï¼š0å­—å½¢çš„ç¯å½¢ï¼Œé‚£ä¹ˆæ…¢æŒ‡é’ˆèµ°åŠåœˆçš„æ—¶å€™ï¼Œå¿«æŒ‡é’ˆèµ°ä¸€åœˆï¼›æ…¢æŒ‡é’ˆèµ°ä¸€åœˆçš„æ—¶å€™ï¼Œå¿«æŒ‡é’ˆèµ°ä¸¤åœˆï¼Œåœ¨èµ·ç‚¹å¤„ç¬¬ä¸€æ¬¡ç›¸é‡ã€‚
- å¦‚æœèµ·ç‚¹ä¸ç›¸åŒï¼š6å­—å½¢çš„ç¯å½¢ï¼Œå½“æ…¢æŒ‡é’ˆèµ°åˆ°ç¯å½¢èµ·ç‚¹çš„æ—¶å€™ï¼Œå¿«æŒ‡é’ˆå¯ä»¥åœ¨ä»»æ„ä½ç½®ä¸Šï¼Œè¿™ä¸¤ä¸ªæŒ‡é’ˆæœ‰å¯èƒ½åœ¨ç¯ä¸Šä»»æ„ä½ç½®ç›¸é‡ã€‚
[code](../../javademo/listnode/HasCycle.java)
```Java
boolean hasCycle(ListNode head){
    ListNode fast = head;
    ListNode slow = head;
    while(fast != null && fast.next != null){
        fast = fast.next.next;
        slow = slow.next;
        if(fast == slow){
            return true;
        }
    }
    return false;
}
```

## ç¯å½¢èµ·ç‚¹
å¯¹äº6å­—å½¢çš„ç¯å½¢ï¼Œå¦‚ä½•ç¡®å®šç¯å½¢èµ·ç‚¹ï¼Ÿ
![picture 12](../../images/01f60b72afaf2681a3210b5c2decf78b87614c96df909e57226fb8bb239079c2.png)  
- å‡è®¾å¿«æ…¢æŒ‡é’ˆåœ¨æŸä¸€ç‚¹ç›¸é‡ï¼Œæ…¢æŒ‡é’ˆèµ°äº†Kï¼Œå¿«æŒ‡é’ˆèµ°äº†2Kï¼Œè¯¥ç‚¹è·ç¦»ç¯å½¢èµ·ç‚¹çš„è·ç¦»æ˜¯m
- å°†æ…¢æŒ‡é’ˆæŒ‡å‘head
- å¿«æŒ‡é’ˆé€Ÿåº¦è°ƒä½ä¸ºæ…¢æŒ‡é’ˆçš„é€Ÿåº¦ç»§ç»­å¾€å‰ã€‚
- å½“æ…¢æŒ‡é’ˆèµ°äº†k-mï¼Œå¿«æŒ‡é’ˆä¹Ÿèµ°äº†k-mï¼Œåœ¨ç¯å½¢èµ·ç‚¹ç›¸é‡ã€‚bingo

```Java
ListNode detectCycle(ListNode head){
    // å…ˆåˆ¤æ–­æ˜¯å¦æœ‰ç¯ï¼Œå³ç¬¬ä¸€æ¬¡ç›¸é‡ã€‚
    ListNode slow = head;
    ListNode fast = head;
    while(fast != null && fast.next !=null){
        fast = fast.next.next;
        slow = slow.next;
        // ä½¿ç”¨==åˆ¤æ–­ï¼ˆæ˜¯å¦ä¸ºåŒä¸€ä¸ªå¯¹è±¡ï¼‰
        if(fast == slow){
            // å­˜åœ¨ç¯å½¢ã€‚
            break;
        }
    }
    if (fast == null || fast.next == null){
        // ä¸å­˜åœ¨ç¯å½¢ã€‚
        return null;
    }
    
    slow = head;
    while(slow != fast){
        // é€Ÿåº¦ä¿æŒä¸€è‡´ã€‚
        slow = slow.next;
        fast = fast.next;
    }
    return slow;
}

```

## æ˜¯å¦ç›¸äº¤

[160. ç›¸äº¤é“¾è¡¨ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/intersection-of-two-linked-lists/)

- æ€è·¯ä¸€ï¼šæƒ³åŠæ³•è®©ä¸¤ä¸ªé“¾è¡¨åŒæ—¶éå†åˆ°ç›¸äº¤èŠ‚ç‚¹ã€‚
    - åˆ†åˆ«è®¡ç®—ä¸¤ä¸ªé“¾è¡¨çš„é•¿åº¦
    - è¾ƒé•¿çš„é“¾è¡¨å…ˆèµ°ï¼Œèµ°åˆ°è·Ÿé”»ç‚¼è¡¨ä¸€æ ·çš„é•¿åº¦ã€‚
    - ç„¶åä¸€èµ·èµ°ï¼Œè¦ä¹ˆæ‰¾åˆ°ç›¸äº¤èŠ‚ç‚¹ã€è¦ä¹ˆä¸€èµ·èµ°åˆ°nullèŠ‚ç‚¹ã€‚

```Java
// æ€è·¯ä¸€
ListNode getIntersectionNode(ListNode headA, ListNode headB){
    // ä¸¤ç§ä¸åŒé£æ ¼çš„éå†é“¾è¡¨çš„æ–¹å¼ï¼Œæ˜¾ç„¶foræ¯”è¾ƒç®€çº¦ã€‚
    int lenA;
    ListNode tmpA = headA;
    while(tmpA != null){
        lenA++;
        tmpA = tmpA.next;
    }
    
    int lenB;
    for(ListNode tmp = headB; tmp != null; tmp = tmp.next){
        lenB++;
    }
    
    // ç§»åŠ¨è¾ƒé•¿çš„é“¾è¡¨ï¼Œä½¿å¾—å‰©ä¸‹çš„èŠ‚ç‚¹æ•°æ˜¯ä¸€æ ·çš„ã€‚
    ListNode p1 = headA;
    ListNode p2 = headB;
    if(lenA > lenB){
        for(int i =0; i < lenA-lenB; i++){
            p1 = p1.next;
        }
    }else{
        for(int i = 0; i< lenB - lenA; i++){
            p2 = p2.next;
        }
    }
    // ä¸¤ä¸ªæŒ‡é’ˆä¸€èµ·ç§»åŠ¨ï¼Œç›´åˆ°æ‰¾åˆ°ç›¸äº¤èŠ‚ç‚¹æˆ–è€…nullä¸ºæ­¢ã€‚
    whileï¼ˆp1 != p2){
        p1 = p1.next;
        p2 = p2.next;
    }
    return p1;
}
```
- æ€è·¯äºŒï¼šå½“æ²¡æœ‰åŠæ³•çš„æ—¶å€™ä½¿ç”¨HashSetæˆ–è€…HashMapã€‚
    - å°†é“¾è¡¨Aå…¨éƒ¨æ”¾å…¥HashSetä¸­
    - éå†é“¾è¡¨Bï¼Œåœ¨HashSetä¸­å¯»æ‰¾æ˜¯å¦åŒ…å«èŠ‚ç‚¹ï¼ˆequalsé»˜è®¤æ˜¯==ï¼‰ï¼Œå¦‚æœå­˜åœ¨åˆ™è¯¥èŠ‚ç‚¹ç›¸äº¤ã€‚
```Java
ListNode getInsertionNode(ListNode headA, ListNode headB){
    Set<ListNode> setA = new HashSet<>();
    for(ListNode tmp = headA; tmp != null; tmp = tmp.next){
        setA.add(tmp);
    }

    for(ListNode tmp = headB; tmp != null; tmp = tmp.next){
        if(setA.contains(tmp)){
            return tmp;
        }
    }
    return null;
}
```

- æ€è·¯ä¸‰ï¼š
    - é“¾è¡¨A.last.next=é“¾è¡¨Bï¼›é“¾è¡¨B.last.next=é“¾è¡¨Aï¼Œä½¿å¾—æ–°çš„ä¸¤ä¸ªé“¾è¡¨çš„é•¿åº¦æ˜¯ä¸€æ ·çš„ã€‚åŸç†å¦‚ä¸‹

```Java
å‡è®¾é“¾è¡¨Açš„è‡ªæœ‰é•¿åº¦æ˜¯mï¼Œé“¾è¡¨Bçš„è‡ªæœ‰é•¿åº¦æ˜¯nï¼Œä»–ä»¬å…±ç”¨éƒ¨åˆ†æ˜¯xï¼Œå…¶ä¸­x>=0ï¼Œé‚£ä¹ˆ
é“¾è¡¨Açš„æ€»é•¿åº¦ï¼šm + x
é“¾è¡¨Bçš„æ€»é•¿åº¦ï¼šn + x
å¦‚æœåšå¦‚ä¸‹å¤„ç†ï¼šA.last.next=é“¾è¡¨Bï¼›é“¾è¡¨B.last.next=é“¾è¡¨Aï¼Œå³ï¼š
m + x + n + x
n + x + m + x ç»“åˆä¸€ä¸‹ï¼š
ï¼ˆm + x + nï¼‰ + x
ï¼ˆn + x + mï¼‰ + x
è¯æ˜å®Œæ¯•ã€‚
ã€æ³¨æ„ã€‘ä¸ºäº†ä¸ç ´åé“¾è¡¨åŸæœ‰ç»“æ„ï¼Œåº”è¯¥å¦‚æ­¤ï¼š
ï¼ˆm + x + null + nï¼‰ + x
ï¼ˆn + x + null + mï¼‰ + x

```

![](https://secure2.wostatic.cn/static/6x8snJSZ9Cwh1H73msu3gp/image.png)

```Java
//ã€é‡ç‚¹å…³æ³¨ä¸‹è¿™ä¸ªã€‘
ListNode findIntersectionNode(ListNode headA, ListNode headB){
    ListNode p1 = headA;
    ListNode p2 = headB;
    
    while( p1 != p2 ){
        // ä¸ºäº†ä¸ç ´åé“¾è¡¨åŸæœ‰ç»“æ„ï¼Œåªæœ‰å½“p1==nullçš„æ—¶å€™è€Œä¸æ˜¯p1.next==nullçš„æ—¶å€™è¿›è¡Œæ‹¼æ¥ã€‚
        if(p1 == null){
            p1 = headB;
        }else{
            p1 = p1.next;
        }
        
        if(p2 == null){
            p2 = headA;
        }else{
            p2 = p2.next;
        }
    }
    // p1æ˜¯nullæˆ–è€…ã€ç›¸äº¤èŠ‚ç‚¹ã€‘ã€‚
    return p1;
}
```

## æ’åºé“¾è¡¨å»é‡
- https://leetcode.cn/problems/remove-duplicates-from-sorted-list/
```java
ListNode removeDuplicates(ListNode head){
    ListNode fast = head;
    ListNode slow = head;

    while(fast != null){
        if(fast.val != slow.val){
            slow.next = fast;
            slow = slow.next;
        }

        fast = fast.next;
    }

    // æ–­å¼€ä¸åé¢å…ƒç´ çš„è”ç³»
    slow.next = null;
    return head;
}
```

# åè½¬ã€é‡ç‚¹ã€‘
A -> Bï¼ŒæŒ‡é’ˆè°ƒå¤´çš„åŸºæœ¬å†™æ³•ï¼š
```Java
head.next.next = head; // A -> B -> A
head.next = null; // A <- B
```

## ç®€å•åè½¬
[206. åè½¬é“¾è¡¨ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/reverse-linked-list/)

æ–¹æ³•ä¸€ï¼šé€’å½’
- **ååº**é€’å½’ï¼Œä»åå¾€å‰ï¼Œè¿”å›åŸé“¾è¡¨çš„tailèŠ‚ç‚¹ä½œä¸ºæ–°é“¾è¡¨çš„headã€‚
- å¯¹æ¯ä¸ªèŠ‚ç‚¹è¿›è¡ŒæŒ‡é’ˆåè½¬å³å¯ã€‚
- [code](../../javademo/listnode/ReverseRecursive.java)
```Java
ListNode reverse(ListNode head){
    // base caseï¼Œæœ€åä¸€ä¸ªèŠ‚ç‚¹ä¸åšåè½¬å¤„ç†ç›´æ¥è¿”å›ã€‚
    if(head == null || head.next == null){
        return head;
    }
    
    ListNode last = reverse(head.next);
    
    // å¯¹élastçš„æ¯ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œåè½¬å¤„ç†ã€‚
    head.next.next = head;
    head.next = null;
    
    // ç›´æ¥è¿”å›tailä½œä¸ºæ–°çš„head
    return last;
}
```

æ–¹æ³•äºŒï¼šè¿­ä»£
- ä»å‰å¾€åï¼Œä¸‰ä¸ªæŒ‡é’ˆä¿å­˜preã€curã€nextèŠ‚ç‚¹ï¼Œæœ€åè¿”å›curï¼ˆå³åŸé“¾è¡¨çš„tailèŠ‚ç‚¹ï¼‰ä½œä¸ºæ–°é“¾è¡¨çš„head
- å¯¹curèŠ‚ç‚¹è°ƒæ•´æ–¹å‘ã€‚
- [code](../../javademo/listnode/ReverseIteration.java)
```java
ListNode reverse(ListNode head){
    if(head == null) return null;
    if(head.next == null) return head;

    ListNode pre = null, next = null;
    ListNode cur = head;
    while(cur != null){
        next = cur.next; // ä¿å­˜next
        cur.next = pre; // è°ƒè½¬æ–¹å‘

        pre = cur; // ä¿å­˜pre
        cur = next; // æŒ‡é’ˆå¾€å‰èµ°
    }

    return pre;
}
```

## åè½¬å‰Kä¸ªèŠ‚ç‚¹

```Java
ListNode successor;
ListNode reverseK(ListNode head, int k){
    if(k == 1){
        successor = head.next;
        return head;
    }
    ListNode last = reverseK(head.next, k-1);
    
    head.next.next = head;
    head.next = successor;
    
    return last;
}
```

## åè½¬m~nä¸ªé“¾è¡¨

```Java
ListNode reverseBetween(ListNode head, int m, int n){
    // m è‚¯å®šæ¯” nè¦å°ï¼Œæ‰€ä»¥åªéœ€è¦åˆ¤æ–­må³å¯ã€‚
    if(m == 1){
        return reverseK(head, n);
    }
    
    // må’Œnéƒ½è¦å‡1ï¼Œæ•´ä½“ç§»åŠ¨ï¼Œé•¿åº¦ä¸èƒ½å˜ã€‚æ‰€ä»¥ä¸¤ä¸ªéƒ½è¦-1
    head.next = reverseBetween(head.next, m-1, n -1);
    return head;
}
```

## åŒºé—´åè½¬ - hard
https://leetcode.cn/problems/reverse-linked-list-ii/
æœ‰ç‚¹å¤æ‚ï¼Œä¸è¿‡æœ€åæå®šäº†[code](../../javademo/listnode/ReverseBetween.java)
è¿˜æœ‰æ›´åŠ ä¼˜ç§€çš„è§£æ³•ï¼š[code](../../javademo/listnode/ReverseBetween2.java)

## Kä¸ªä¸€ç»„åè½¬é“¾è¡¨

# åˆ¤æ–­å›æ–‡é“¾è¡¨
> å¦‚æœå­—ç¬¦ä¸²æ˜¯é€šè¿‡å•é“¾è¡¨æ¥å­˜å‚¨çš„ï¼Œé‚£è¯¥å¦‚ä½•æ¥åˆ¤æ–­æ˜¯ä¸€ä¸ªå›æ–‡ä¸²å‘¢ï¼Ÿä½ æœ‰ä»€ä¹ˆå¥½çš„è§£å†³æ€è·¯å‘¢ï¼Ÿç›¸åº”çš„æ—¶é—´ç©ºé—´å¤æ‚åº¦åˆæ˜¯å¤šå°‘å‘¢ï¼Ÿ

å•å‘é“¾è¡¨ï¼š
1. A-B-C-D-C-B-Aï¼šæ˜¯å›æ–‡
2. A-B-C-D-D-C-B-Aï¼šæ˜¯å›æ–‡
3. A-B-C-D-D-B-Aï¼šä¸æ˜¯å›æ–‡

- æ–¹æ³•ä¸€ï¼Œä½¿ç”¨æ ˆï¼Œç©ºé—´å¤æ‚åº¦O(N)ï¼Œ[code](../../javademo/listnode/Palindrone.java)
- æ–¹æ³•äºŒï¼Œåè½¬éƒ¨åˆ†é“¾è¡¨ï¼Œç©ºé—´å¤æ‚åº¦O(1)ï¼š
  - æ‰¾ä¸­ç‚¹ï¼šå¦‚æœæ‰¾åå·¦çš„ä¸­ç‚¹ï¼Œéœ€è¦ä¸€ä¸ªdummyå“¨å…µï¼›å¦‚æœæ‰¾åå³çš„ä¸­ç‚¹ï¼Œä¸éœ€è¦dummyå“¨å…µã€‚
  - æ‰¾åˆ°ä¹‹åå¯¹mid.nextä¸ºheadçš„é“¾è¡¨è¿›è¡Œåè½¬ã€‚
  - åˆ¤æ–­æ˜¯å¦å›æ–‡
  - å¯¹mid.nextä¸ºheadçš„é“¾è¡¨è¿›è¡Œè¿˜åŸã€‚

# çº¦ç‘Ÿå¤«ç¯
https://leetcode.cn/problems/yuan-quan-zhong-zui-hou-sheng-xia-de-shu-zi-lcof/
é¢˜è§£ï¼šhttps://leetcode.cn/circle/article/BOoxAL/

# äºŒè¿›åˆ¶é“¾è¡¨è½¬åè¿›åˆ¶
https://leetcode.cn/problems/convert-binary-number-in-a-linked-list-to-integer/
- äºŒè¿›åˆ¶xyzè½¬åè¿›åˆ¶ï¼šx * (1 << 2) + y * (1 << 1) + z * (1 << 0)ï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šæ˜¯åè½¬é“¾è¡¨ï¼Œ
- æ–¹æ³•ä¸€ï¼šé€’å½’[code](../../javademo/listnode/DecimalValue.java)
- æ–¹æ³•äºŒï¼šstackåšåè½¬
- æ–¹æ³•ä¸‰ï¼šå·¦ç§»è¿ç®—ã€‚1101ï¼Œ1å·¦ç§»ä¸‰ä½ æˆ– 1å·¦ç§»ä¸¤ä½ æˆ– 0å·¦ç§»ä¸€ä½ æˆ– 1å·¦ç§»é›¶ä½ã€‚
```java
public int cal(ListNode head){
    if(head == null) return 0;
    int res = 0;
    while(head != null){
        res <<= 1;
        res |= head.val;
        head = head.next;
    }
    return res;
}
```

# é‡æ’é“¾è¡¨
https://leetcode.cn/problems/LGjMqU/
[code](../../javademo/listnode/ReorderList.java)
- ä»å¤´åˆä»å°¾å–æ•°æ®ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°åŒç«¯é˜Ÿåˆ—ã€‚
```java
public void reorder(ListNode head){
    if(head == null || head.next  == null) return;
    Deque<ListNode> deque = new LinkedList<>();
    ListNode cur = head;
    while(cur != null){
        deque.addLast();
        cur = cur.next;
    }

    ListNode dummy = new ListNode(0);
    boolean removeFirst = true;
    while(!deque.isEmpty()){
        dummy.next = removeFirst? deque.removeFirst() : deque.removeLast();
        dummy = dummy.next;
        dummy.next = null;
        removeFirst = !removeFirst;
    }
}

```

# é“¾è¡¨æ’åº
https://leetcode.cn/problems/7WHec2/
[code](../../javademo/listnode/SortList.java)
TODO nLognçš„æ’åºç®—æ³•

# å¤æ‚é“¾è¡¨çš„å¤åˆ¶
https://leetcode.cn/problems/fu-za-lian-biao-de-fu-zhi-lcof/
